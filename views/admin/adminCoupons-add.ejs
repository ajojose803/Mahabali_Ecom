<%- include('../partials/adminHeader') -%>
  <script defer src="https://cdn.crop.guide/loader/l.js?c=ZQFGVQ"></script>
  <ul class="list-unstyled">
    <li><a href="/admin/dashboard"> <i class="icon-home"></i>Dashboard</a></li>
    <li><a href="/admin/users"> <i class="fa fa-bar-chart"></i>Users</a></li>
    <li><a href="/admin/category"> <i class="fa fa-building-o"></i>Category</a></li>
    <li><a href="/admin/products"> <i class="icon-grid"></i>Products</a></li>
    <li class="active"><a href="/admin/coupons"> <i class="fa fa-percent"></i>Coupons</a></li>
    <li><a href="/admin/orders"> <i class="icon-padnote"></i>Orders</a></li>
    <li><a href="/admin/banners"> <i class="fa fa-map"></i>Banners</a></li>
  </ul>
  </nav>
  <!-- Sidebar Navigation end-->
  <div class="page-content">
    <div class="page-header">
      <div class="container-fluid">
        <h2 class="h5 no-margin-bottom">Add Coupon</h2>
      </div>
    </div>

    <div class="col-lg-12">
      <div class="block">
        <div class="title"><strong>Add Coupon</strong></div>
        <div class="block-body">
          <form class="form-horizontal" action="/admin/add-coupon" method="post">
            <div class="form-group row">
              <label class="col-sm-3 form-control-label">Code</label>
              <div class="col-sm-9">
                <input type="text" class="form-control" name="code" required>
              </div>
            </div>
            <div class="line"></div>
            <div class="form-group row">
              <label class="col-sm-3 form-control-label">Discount Type</label>
              <div class="col-sm-9">
                <select name="discountType" id="discount-type-select" required>
                  <option value="flatDiscount">Flat Discount</option>
                  <option value="percentageDiscount">Percentage Discount</option>
                </select>
              </div>
            </div>
            <div class="line"></div>
            <div id="additional-fields"></div>
            <div class="line"></div>
            <div class="form-group row">
              <label class="col-sm-3 form-control-label">Discount Amount</label>
              <div class="col-sm-9">
                <input type="number" class="form-control" name="discountAmount" min="1" required>
              </div>
            </div>
            <div class="line"></div>
            <div class="form-group row">
              <label class="col-sm-3 form-control-label">Minimum Purchase Amount</label>
              <div class="col-sm-9">
                <input type="number" class="form-control" name="minPurchaseAmount" min="0" required>
              </div>
            </div>
            <div class="line"></div>
            <div class="form-group row">
              <label class="col-sm-3 form-control-label">Max Redeemable Amount</label>
              <div class="col-sm-9">
                <input type="number" class="form-control" name="maxRedeem" min="0" required>
              </div>
            </div>
            <div class="line"></div>
            <div class="form-group row">
              <label class="col-sm-3 form-control-label">Valid From</label>
              <div class="col-sm-9">
                <input type="date" class="form-control" name="validFrom" required>
              </div>
            </div>
            <div class="line"></div>
            <div class="form-group row">
              <label class="col-sm-3 form-control-label">Valid To</label>
              <div class="col-sm-9">
                <input type="date" class="form-control" name="validTo" required>
              </div>
            </div>
            <div class="line"></div>
            <div class="form-group row">
              <label class="col-sm-3 form-control-label">Once Per User</label>
              <div class="col-sm-9">
                <input type="checkbox" name="oncePerUser">
              </div>
            </div>
            <div class="line"></div>
            <div class="form-group row">
              <div class="col-sm-9 ml-auto">
                <a class="btn btn-secondary" href="/admin/coupons">Cancel</a>
                <button type="submit" class="btn btn-primary">Add Coupon</button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
  </section>

  <script>
    //validation
    document.addEventListener('DOMContentLoaded', function() {
      const discountAmountInput = document.querySelector('input[name="discountAmount"]');
      const minPurchaseAmountInput = document.querySelector('input[name="minPurchaseAmount"]');
      const form = document.querySelector('form');

      discountAmountInput.addEventListener('input', function() {
        if (parseFloat(this.value) < 0) {
          this.value = 1; // Set a default value or handle as per your application logic
        }
      });

      minPurchaseAmountInput.addEventListener('input', function() {
        if (parseInt(this.value) < 0) {
          this.value = 0; // Set a default value or handle as per your application logic
        }
      });

      form.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          e.preventDefault();
        }
      });
    });
  </script>
  <%- include('../partials/adminFooter') -%>

 